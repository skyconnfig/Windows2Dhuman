# Windows 部署硬件配置需求

## 项目概述

本项目是一个基于深度学习的2D数字人实时渲染系统，支持实时语音驱动的面部动画生成。项目采用轻量化设计，单帧推理仅需39 Mflops算力，支持CPU和GPU双模式运行。

## 硬件配置要求

### 🔧 最低配置（基础运行）

**处理器 (CPU)**
- Intel Core i5-8400 / AMD Ryzen 5 2600 或更高
- 6核心6线程，基础频率 2.8GHz+
- 支持AVX2指令集

**内存 (RAM)**
- 8GB DDR4 2400MHz
- 可用内存至少6GB（系统预留2GB）

**存储空间**
- 系统盘：至少5GB可用空间
- 模型文件：约500MB
- 临时文件：建议预留2GB空间

**显卡 (GPU)** - 可选
- 集成显卡：Intel UHD Graphics 630 或 AMD Vega 8
- 独立显卡：GTX 1050 / RX 560 或更高
- 显存：至少2GB

**操作系统**
- Windows 10 (1903) 或更高版本
- Windows 11 (推荐)

### 🚀 推荐配置（流畅体验）

**处理器 (CPU)**
- Intel Core i7-10700K / AMD Ryzen 7 3700X
- 8核心16线程，基础频率 3.6GHz+
- 支持AVX2指令集

**内存 (RAM)**
- 16GB DDR4 3200MHz
- 双通道配置

**存储空间**
- SSD：至少10GB可用空间
- NVMe SSD（推荐）用于更快的模型加载

**显卡 (GPU)**
- NVIDIA GTX 1660 Super / RTX 3060
- AMD RX 6600 XT
- 显存：4GB+
- 支持CUDA 11.0+（NVIDIA）

**网络**
- 宽带连接（用于模型下载和更新）

### 🏆 高性能配置（专业级）

**处理器 (CPU)**
- Intel Core i9-12900K / AMD Ryzen 9 5900X
- 12核心24线程，基础频率 3.9GHz+

**内存 (RAM)**
- 32GB DDR4 3600MHz 或 DDR5 4800MHz
- 双通道或四通道配置

**存储空间**
- NVMe SSD：至少20GB可用空间
- PCIe 4.0 SSD（推荐）

**显卡 (GPU)**
- NVIDIA RTX 4070 / RTX 3080
- AMD RX 7800 XT
- 显存：8GB+
- 支持CUDA 12.0+（NVIDIA）

## 软件环境要求

### Python 环境
- Python 3.11（推荐）
- Conda 或 Miniconda

### 核心依赖库
```
torch >= 2.0.0
torchvision >= 0.15.0
opencv-python >= 4.8.0
numpy >= 1.24.0
scipy >= 1.10.0
mediapipe >= 0.10.0
gradio >= 3.40.0
kaldi-native-fbank
scikit-learn
pyglm
glfw
PyOpenGL
```

### 可选加速库
- **CUDA Toolkit 12.1**（NVIDIA GPU加速）
- **cuDNN 8.9**（深度学习加速）
- **Intel MKL**（CPU数学库优化）

## 性能基准测试

### CPU模式性能
| 配置等级 | 处理器型号 | 单帧耗时 | 实时率 | 内存占用 |
|---------|-----------|---------|--------|----------|
| 最低配置 | i5-8400 | ~80ms | 12.5fps | 3.2GB |
| 推荐配置 | i7-10700K | ~40ms | 25fps | 4.1GB |
| 高性能 | i9-12900K | ~25ms | 40fps | 5.8GB |

### GPU模式性能
| 配置等级 | 显卡型号 | 单帧耗时 | 实时率 | 显存占用 |
|---------|----------|---------|--------|----------|
| 最低配置 | GTX 1050 | ~35ms | 28fps | 1.8GB |
| 推荐配置 | RTX 3060 | ~15ms | 66fps | 2.4GB |
| 高性能 | RTX 4070 | ~8ms | 125fps | 3.1GB |

## 存储空间详细分析

### 模型文件大小
- **DINet_mini模型**: ~45MB
- **LSTM音频模型**: ~12MB
- **PCA数据文件**: ~8MB
- **渲染模型**: ~25MB
- **预训练权重**: ~150MB

### 运行时存储需求
- **临时视频文件**: 100MB-2GB（取决于视频长度）
- **音频缓存**: 50-200MB
- **系统缓存**: 500MB-1GB
- **日志文件**: 10-50MB

## 网络带宽要求

### 初始部署
- **模型下载**: 需要500MB-1GB带宽
- **依赖库安装**: 需要1-3GB带宽
- **建议网速**: 10Mbps+

### 运行时网络
- **本地运行**: 无网络要求
- **Web服务模式**: 上行1Mbps，下行5Mbps
- **实时流媒体**: 上行5Mbps，下行10Mbps

## 特殊硬件支持

### NVIDIA GPU优化
- **Tensor Cores**: RTX系列显卡可获得额外加速
- **NVENC编码器**: 支持硬件视频编码
- **CUDA内存管理**: 自动优化显存使用

### AMD GPU支持
- **ROCm平台**: 实验性支持（Linux优先）
- **OpenCL加速**: 部分计算可使用OpenCL

### Intel集成显卡
- **Intel Arc**: 支持XeHPG架构
- **Quick Sync**: 硬件视频编解码支持

## 系统优化建议

### Windows系统设置
1. **电源管理**: 设置为"高性能"模式
2. **虚拟内存**: 设置为物理内存的1.5-2倍
3. **防火墙**: 允许Python和相关程序通过防火墙
4. **Windows Defender**: 将项目目录添加到排除列表

### 硬件优化
1. **内存**: 启用XMP配置文件
2. **CPU**: 关闭节能模式
3. **GPU**: 设置为性能模式
4. **存储**: 定期进行磁盘清理和碎片整理

## 故障排除

### 常见问题

**1. 内存不足错误**
- 症状：程序崩溃，提示"Out of Memory"
- 解决：增加虚拟内存，关闭其他程序

**2. GPU驱动问题**
- 症状：CUDA初始化失败
- 解决：更新显卡驱动到最新版本

**3. 模型加载缓慢**
- 症状：启动时间过长
- 解决：使用SSD存储，检查网络连接

**4. 实时性能不佳**
- 症状：帧率低于预期
- 解决：降低输出分辨率，启用GPU加速

### 性能监控工具
- **任务管理器**: 监控CPU、内存、GPU使用率
- **GPU-Z**: 详细的GPU信息和监控
- **HWiNFO64**: 全面的硬件监控
- **Process Monitor**: 文件和注册表访问监控

## 部署检查清单

### 硬件检查
- [ ] CPU满足最低要求（6核心+）
- [ ] 内存不少于8GB
- [ ] 存储空间充足（10GB+）
- [ ] GPU驱动已更新
- [ ] 网络连接正常

### 软件检查
- [ ] Python 3.11已安装
- [ ] Conda环境已创建
- [ ] 依赖库已安装
- [ ] CUDA工具包已安装（GPU模式）
- [ ] 模型文件已下载

### 功能测试
- [ ] 基础推理测试通过
- [ ] 音频处理正常
- [ ] 视频输出正确
- [ ] Web界面可访问
- [ ] 性能达到预期

## 升级建议

### 短期升级（6个月内）
1. **内存升级**: 8GB → 16GB
2. **存储升级**: HDD → SSD
3. **显卡驱动**: 保持最新版本

### 长期升级（1-2年内）
1. **CPU升级**: 更高核心数处理器
2. **GPU升级**: 更新一代显卡
3. **系统升级**: Windows 11最新版本

---

## 技术支持

如遇到硬件配置相关问题，请提供以下信息：
- 系统配置详情（CPU、内存、GPU型号）
- 错误日志和截图
- 性能监控数据
- 具体的使用场景

**联系方式**：
- 项目GitHub Issues
- 微信交流群（备注"硬件配置"）
- QQ技术群

---

*最后更新时间：2024年1月*
*文档版本：v1.0*